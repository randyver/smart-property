(()=>{var e={};e.id=109,e.ids=[109],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},79837:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>p,pages:()=>m,routeModule:()=>h,tree:()=>d});var r=a(73137),s=a(54647),i=a(4183),l=a.n(i),n=a(71775),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);a.d(t,o);let c=r.AppPageRouteModule,d=["",{children:["analytics",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,32213)),"E:\\Coding\\WGC2025\\smart-property\\frontend\\src\\app\\analytics\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,16195)),"E:\\Coding\\WGC2025\\smart-property\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,66197)),"E:\\Coding\\WGC2025\\smart-property\\frontend\\src\\app\\not-found.tsx"]}],m=["E:\\Coding\\WGC2025\\smart-property\\frontend\\src\\app\\analytics\\page.tsx"],p="/analytics/page",x={require:a,loadChunk:()=>Promise.resolve()},h=new c({definition:{kind:s.x.APP_PAGE,page:"/analytics/page",pathname:"/analytics",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6545:(e,t,a)=>{Promise.resolve().then(a.bind(a,97704))},97704:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>AnalyticsPage});var r=a(60080),s=a(9885),i=a(34707),l=a(24300),n=a(35522),o=a(74419),c=a(14839),d=a(54206),m=a(83053),p=a(97106),x=a(34482),h=a(98741),g=a(16324),u=a(44723),y=a(8081),b=a(63647);let f={formatNumber:e=>null==e||isNaN(e)?"N/A":e>=1e9?(e/1e9).toFixed(1)+"M":e>=1e6?(e/1e6).toFixed(1)+"Jt":e>=1e3?(e/1e3).toFixed(1)+"Rb":new Intl.NumberFormat("en-US").format(e),formatCurrency:(e,t="Rp")=>null==e||isNaN(e)?"N/A":"Rp"===t?e>=1e9?"Rp "+(e/1e9).toFixed(1)+"M":e>=1e6?"Rp "+(e/1e6).toFixed(1)+"Jt":"Rp "+new Intl.NumberFormat("id-ID").format(e):new Intl.NumberFormat("en-US",{style:"currency",currency:t,maximumFractionDigits:0}).format(e),formatPercentage:(e,t=1)=>null==e||isNaN(e)?"N/A":e.toFixed(t)+"%",formatDate:e=>{try{let t=new Date(e);return t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch(e){return"Invalid date"}},formatClimateScore:e=>{if(null==e||isNaN(Number(e)))return"N/A";let t=Number(e);return t>=80?"Sangat Baik":t>=60?"Baik":t>=40?"Cukup":t>=20?"Buruk":"Sangat Buruk"},getClimateScoreColor:e=>{if(null==e||isNaN(Number(e)))return"bg-gray-400";let t=Number(e);return t>=80?"bg-green-600":t>=60?"bg-green-500":t>=40?"bg-yellow-500":t>=20?"bg-orange-500":"bg-red-600"}};function AnalyticsChart({type:e,data:t,xKey:a,yKey:j,title:v,dataKey:N,colors:k=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"],height:w=300,currency:_=!1,percentage:C=!1,legend:S=!0,animate:D=!0,stacked:P=!1,sorting:A="none",className:T="",showLabels:L=!1,labelKey:B,formatter:K,xAxisLabel:I,yAxisLabel:H,binData:F=!1,numBins:E=5}){let[$,R]=(0,s.useState)([]);(0,s.useEffect)(()=>{if(!t||0===t.length)return;let r=[...t];if("none"!==A&&r.sort((e,t)=>{let a="string"==typeof j?Number(e[j]):Number(e[j[0]]),r="string"==typeof j?Number(t[j]):Number(t[j[0]]);return"asc"===A?a-r:r-a}),F&&"line"===e&&"string"==typeof a&&"string"==typeof j){let e=r.map(e=>Number(e[a])).filter(e=>!isNaN(e)),t=Math.min(...e),s=Math.max(...e),i=(s-t)/E,l={};for(let e=0;e<E;e++){let a=t+e*i,r=a+i;l[`${Math.round(a)}-${Math.round(r)}`]=[]}r.forEach(e=>{let r=Number(e[a]),s=Number(e[j]);if(isNaN(r)||isNaN(s))return;let n=Math.min(Math.floor((r-t)/i),E-1),o=t+n*i,c=`${Math.round(o)}-${Math.round(o+i)}`;l[c].push(s)});let n=Object.entries(l).map(([e,t])=>{if(0===t.length)return{x:e,y:0,count:0};let a=t.reduce((e,t)=>e+t,0)/t.length;return{x:e,y:a,count:t.length}});n.sort((e,t)=>{let a=Number(e.x.split("-")[0]),r=Number(t.x.split("-")[0]);return a-r}),R(n)}else if("pie"===e){let e="string"==typeof j?j:j[0],t=r.map(t=>({name:String(t[a]),value:Number(t[e]),...B?{label:t[B]}:{}}));R(t)}else R(r)},[t,e,a,j,A,B,F,E]);let formatValue=e=>K?K(e):_?f.formatCurrency(e):C?f.formatPercentage(e):f.formatNumber(e),CustomTooltip=({active:t,payload:a,label:s})=>t&&a&&a.length?(0,r.jsxs)("div",{className:"bg-white p-2 border border-gray-200 rounded shadow-md text-sm text-black",children:[r.jsx("p",{className:"font-medium mb-1",children:s}),a.map((e,t)=>(0,r.jsxs)("p",{style:{color:e.color},className:"flex items-center",children:[(0,r.jsxs)("span",{className:"mr-2",children:[e.name,":"]}),r.jsx("span",{className:"font-semibold",children:formatValue(e.value)})]},t)),"line"===e&&F&&a[0].payload.count&&(0,r.jsxs)("p",{className:"text-gray-500 text-xs mt-1",children:["Jumlah properti: ",a[0].payload.count]})]}):null,renderCustomizedPieLabel=e=>{let{cx:t,cy:a,midAngle:s,innerRadius:i,outerRadius:l,percent:n,index:o,value:c}=e,d=Math.PI/180,m=i+(l-i)*.5,p=t+m*Math.cos(-s*d),x=a+m*Math.sin(-s*d);return n<.05?null:r.jsx("text",{x:p,y:x,fill:"white",textAnchor:"middle",dominantBaseline:"central",fontSize:12,fontWeight:"bold",children:`${(100*n).toFixed(0)}%`})},z=(()=>{let t=D?{animationDuration:1e3,animationEasing:"ease-in-out"}:{},s=Array.isArray(j)?j:[j];switch(e){case"line":return(0,r.jsxs)(i.w,{data:$,margin:{top:5,right:30,left:20,bottom:30},...t,children:[r.jsx(l.q,{strokeDasharray:"3 3",vertical:!1,stroke:"#e5e7eb"}),r.jsx(n.K,{dataKey:F?"x":a,tick:{fontSize:12,fill:"#6B7280"},axisLine:{stroke:"#e5e7eb"},tickLine:{stroke:"#e5e7eb"},height:50,children:I&&r.jsx(o._,{value:I,position:"bottom",offset:20,style:{textAnchor:"middle",fontSize:"12px",fill:"#6B7280"}})}),r.jsx(c.B,{tick:{fontSize:12,fill:"#6B7280"},axisLine:{stroke:"#e5e7eb"},tickLine:{stroke:"#e5e7eb"},tickFormatter:formatValue,width:80,children:H&&r.jsx(o._,{value:H,position:"left",angle:-90,offset:10,style:{textAnchor:"middle",fontSize:"12px",fill:"#6B7280"}})}),r.jsx(d.u,{content:r.jsx(CustomTooltip,{})}),(!0===S||"object"==typeof S)&&r.jsx(m.D,{wrapperStyle:{fontSize:12,paddingTop:10,..."object"==typeof S?S.wrapperStyle:{}},verticalAlign:"object"==typeof S&&S.verticalAlign?S.verticalAlign:"bottom",align:"object"==typeof S&&S.align?S.align:"center"}),r.jsx(p.x,{type:"monotone",dataKey:F?"y":s[0],stroke:k[0],strokeWidth:2,dot:{r:4,strokeWidth:2},activeDot:{r:6},name:N||s[0]})]});case"bar":return(0,r.jsxs)(x.v,{data:$,margin:{top:5,right:30,left:20,bottom:30},...t,children:[r.jsx(l.q,{strokeDasharray:"3 3",vertical:!1,stroke:"#e5e7eb"}),r.jsx(n.K,{dataKey:a,tick:{fontSize:12,fill:"#6B7280"},axisLine:{stroke:"#e5e7eb"},tickLine:{stroke:"#e5e7eb"},height:50,children:I&&r.jsx(o._,{value:I,position:"bottom",offset:40,style:{textAnchor:"middle",fontSize:"12px",fill:"#6B7280"}})}),r.jsx(c.B,{tick:{fontSize:12,fill:"#6B7280"},axisLine:{stroke:"#e5e7eb"},tickLine:{stroke:"#e5e7eb"},tickFormatter:formatValue,width:80,children:H&&r.jsx(o._,{value:H,position:"left",angle:-90,offset:-10,style:{textAnchor:"middle",fontSize:"12px",fill:"#6B7280"}})}),r.jsx(d.u,{content:r.jsx(CustomTooltip,{})}),S&&r.jsx(m.D,{wrapperStyle:{fontSize:12,paddingTop:10}}),s.map((e,t)=>r.jsx(h.$,{dataKey:e,fill:k[t%k.length],name:N||e,stackId:P?"stack":void 0,radius:[4,4,0,0]},e.toString()))]});case"horizontalBar":return(0,r.jsxs)(x.v,{data:$,layout:"vertical",margin:{top:5,right:30,left:75,bottom:30},...t,children:[r.jsx(l.q,{strokeDasharray:"3 3",horizontal:!1,stroke:"#e5e7eb"}),r.jsx(n.K,{type:"number",tick:{fontSize:12,fill:"#6B7280"},axisLine:{stroke:"#e5e7eb"},tickLine:{stroke:"#e5e7eb"},tickFormatter:formatValue,height:50,children:I&&r.jsx(o._,{value:I,position:"bottom",offset:40,style:{textAnchor:"middle",fontSize:"12px",fill:"#6B7280"}})}),r.jsx(c.B,{dataKey:a,type:"category",tick:{fontSize:12,fill:"#6B7280"},axisLine:{stroke:"#e5e7eb"},tickLine:{stroke:"#e5e7eb"},width:70,children:H&&r.jsx(o._,{value:H,position:"left",angle:-90,offset:40,style:{textAnchor:"middle",fontSize:"12px",fill:"#6B7280"}})}),r.jsx(d.u,{content:r.jsx(CustomTooltip,{})}),S&&r.jsx(m.D,{wrapperStyle:{fontSize:12,paddingTop:10}}),s.map((e,t)=>r.jsx(h.$,{dataKey:e,fill:k[t%k.length],name:N||e,stackId:P?"stack":void 0,radius:[0,4,4,0]},e.toString()))]});case"stackedBar":return(0,r.jsxs)(x.v,{data:$,margin:{top:5,right:30,left:20,bottom:30},...t,children:[r.jsx(l.q,{strokeDasharray:"3 3",vertical:!1,stroke:"#e5e7eb"}),r.jsx(n.K,{dataKey:a,tick:{fontSize:12,fill:"#6B7280"},axisLine:{stroke:"#e5e7eb"},tickLine:{stroke:"#e5e7eb"},height:50,children:I&&r.jsx(o._,{value:I,position:"bottom",offset:20,style:{textAnchor:"middle",fontSize:"12px",fill:"#6B7280"}})}),r.jsx(c.B,{tick:{fontSize:12,fill:"#6B7280"},axisLine:{stroke:"#e5e7eb"},tickLine:{stroke:"#e5e7eb"},tickFormatter:formatValue,width:80,children:H&&r.jsx(o._,{value:H,position:"left",angle:-90,offset:-10,style:{textAnchor:"middle",fontSize:"12px",fill:"#6B7280"}})}),r.jsx(d.u,{content:r.jsx(CustomTooltip,{})}),S&&r.jsx(m.D,{wrapperStyle:{fontSize:12,paddingTop:10}}),s.map((e,t)=>r.jsx(h.$,{dataKey:e,fill:k[t%k.length],name:N||e,stackId:"a",radius:[t===s.length-1?4:0,t===s.length-1?4:0,0===t?4:0,0===t?4:0]},e.toString()))]});case"pie":return(0,r.jsxs)(g.u,{...t,children:[r.jsx(u.b,{data:$,cx:"50%",cy:"50%",labelLine:!1,label:L?renderCustomizedPieLabel:void 0,outerRadius:80,fill:"#8884d8",dataKey:"value",nameKey:"name",children:$.map((e,t)=>r.jsx(y.b,{fill:k[t%k.length]},`cell-${t}`))}),r.jsx(d.u,{formatter:formatValue}),S&&r.jsx(m.D,{layout:"horizontal",verticalAlign:"bottom",align:"center",wrapperStyle:{fontSize:12,paddingTop:10}})]});default:return null}})();return(0,r.jsxs)("div",{className:`bg-white rounded-lg shadow-md p-4 ${T}`,children:[r.jsx("h3",{className:"font-bold text-lg mb-4 text-gray-800",children:v}),r.jsx("div",{className:"w-full",style:{height:`${w}px`},children:z?r.jsx(b.h,{width:"100%",height:"100%",children:z}):r.jsx("div",{className:"h-full flex items-center justify-center",children:r.jsx("p",{className:"text-gray-500",children:"Unsupported chart type"})})})]})}var j=a(60350),v=a(10566),N=a(59610);function cn(...e){return(0,N.m)((0,v.W)(e))}let k=s.createContext(void 0),Tabs=({defaultValue:e,className:t,onValueChange:a,children:i,...l})=>{let[n,o]=s.useState(e);return r.jsx(k.Provider,{value:{value:n,onValueChange:e=>{o(e),a&&a(e)}},children:r.jsx("div",{className:cn("w-full",t),"data-state":n,...l,children:i})})},TabsList=({className:e,children:t,...a})=>r.jsx("div",{className:cn("flex h-9 items-center gap-2 bg-gray-100 p-1 rounded-md",e),role:"tablist",...a,children:t}),TabsTrigger=({className:e,value:t,children:a,...i})=>{let l=s.useContext(k);if(!l)throw Error("TabsTrigger must be used within a Tabs component");let n=l.value===t;return r.jsx("button",{type:"button",role:"tab",className:cn("inline-flex items-center justify-center px-3 py-1 text-sm font-medium transition-all","rounded-sm outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",n?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800 hover:bg-gray-200",e),"data-state":n?"active":"inactive","aria-selected":n,onClick:()=>l.onValueChange(t),...i,children:a})},TabsContent=({className:e,value:t,children:a,...i})=>{let l=s.useContext(k);if(!l)throw Error("TabsContent must be used within a Tabs component");let n=l.value===t;return n?r.jsx("div",{role:"tabpanel","data-state":n?"active":"inactive",className:cn("outline-none",e),...i,children:a}):null};Tabs.displayName="Tabs",TabsList.displayName="TabsList",TabsTrigger.displayName="TabsTrigger",TabsContent.displayName="TabsContent";var w=a(21380);function AnalyticsPage(){let[e,t]=(0,s.useState)(!0),[a,i]=(0,s.useState)(null),[l,n]=(0,s.useState)(null),[o,c]=(0,s.useState)([]),[d,m]=(0,s.useState)([]),[p,x]=(0,s.useState)([]),[h,g]=(0,s.useState)(null),[u,y]=(0,s.useState)([]),[b,v]=(0,s.useState)("overall_score"),[N,k]=(0,s.useState)("price"),[_,C]=(0,s.useState)([]),[S,D]=(0,s.useState)([]),[P,A]=(0,s.useState)([]),[T,L]=(0,s.useState)([]),[B,K]=(0,s.useState)([]),[I,H]=(0,s.useState)([]),[F,E]=(0,s.useState)([]),[$,R]=(0,s.useState)([]),[z,V]=(0,s.useState)("distribution"),[M,U]=(0,s.useState)("priceVsClimate"),q={overall_score:"Overall Climate Safety",lst_score:"Suhu Permukaan Tanah (LST)",ndvi_score:"Indeks Vegetasi (NDVI)",utfvi_score:"Indeks Variansi Termal Perkotaan (UTFVI)",uhi_score:"Pulau Panas Perkotaan (UHI)"};(0,s.useEffect)(()=>{let fetchAnalytics=async()=>{try{t(!0);let e=await j.n9.getDashboardSummary();n(e.data);let a=await j.n9.getPriceByDistrict();c(a.data);let r=await j.n9.getClimateByDistrict();m(r.data);let s=await j.n9.getPropertyDistribution();g(s.data);let i=await j.n9.getBedroomDistribution();x(i.data);let l=await j.n9.getClimateImpact();y(l.data);let o=await fetch(`${process.env.NEXT_PUBLIC_API_URL||"http://localhost:5000"}/api/analytics/land-price-distribution`),d=await o.json();"success"===d.status&&C(d.data);let p=await fetch(`${process.env.NEXT_PUBLIC_API_URL||"http://localhost:5000"}/api/analytics/certificate-distribution`),h=await p.json();"success"===h.status&&D(h.data);let u=await fetch(`${process.env.NEXT_PUBLIC_API_URL||"http://localhost:5000"}/api/analytics/price-by-certificate`),b=await u.json();"success"===b.status&&E(b.data);let f=await fetch(`${process.env.NEXT_PUBLIC_API_URL||"http://localhost:5000"}/api/analytics/price-vs-climate`),v=await f.json();"success"===v.status&&A(v.data);let N=await fetch(`${process.env.NEXT_PUBLIC_API_URL||"http://localhost:5000"}/api/analytics/price-vs-land-price`),k=await N.json();"success"===k.status&&L(k.data);let w=await fetch(`${process.env.NEXT_PUBLIC_API_URL||"http://localhost:5000"}/api/analytics/price-vs-land-area`),_=await w.json();"success"===_.status&&K(_.data);let S=await fetch(`${process.env.NEXT_PUBLIC_API_URL||"http://localhost:5000"}/api/analytics/land-price-vs-climate`),P=await S.json();"success"===P.status&&H(P.data);let T=await fetch(`${process.env.NEXT_PUBLIC_API_URL||"http://localhost:5000"}/api/analytics/multi-factor-analysis`),B=await T.json();"success"===B.status&&R(B.data)}catch(e){i("Failed to load analytics data. Please refresh the page."),console.error(e)}finally{t(!1)}};fetchAnalytics()},[]);let getClimateDataForChart=()=>d&&0!==d.length?d.filter(e=>null!==e[b]&&!isNaN(e[b])).sort((e,t)=>t[b]-e[b]).slice(0,10).map(e=>({district:e.district,score:e[b],count:e.property_count})):[],getPriceDistributionData=()=>h&&h.price_distribution||[],getPropertyTypeData=()=>h&&h.property_type_distribution||[],getCertificateDistributionData=()=>S||[],getPriceByCertificateData=()=>F?F.map(e=>({certificate:e.certificate,average_price:e.average_price,property_count:e.property_count})):[],getLandPriceDistributionData=()=>_||[],getClimateImpactData=e=>{if(!u||0===u.length)return[];let t=u.find(t=>t.factor===e);return t&&t.data?t.data.map(e=>({range:e.score_range,impact:e.price_impact_percentage,count:e.property_count})):[]},formatScatterData=(e,t,a)=>{if(!e||0===e.length)return[];let r=Math.min(e.length,100),s=Math.max(1,Math.floor(e.length/r)),i=[];for(let r=0;r<e.length;r+=s)e[r]&&void 0!==e[r][t]&&void 0!==e[r][a]&&i.push({x:e[r][t],y:e[r][a],district:e[r].district||"Unknown"});return i};return(0,r.jsxs)("main",{className:"h-screen flex flex-col mt-20",children:[r.jsx("div",{className:"flex-1 p-6",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[r.jsx("div",{className:"flex justify-between items-center mb-6",children:r.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Analisis Pasar Properti"})}),e?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):a?r.jsx("div",{className:"bg-red-50 p-4 rounded-md text-red-700 mb-6",children:r.jsx("p",{children:a})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Properti"}),r.jsx("p",{className:"text-2xl font-bold text-gray-800",children:l?.total_properties.toLocaleString()})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Harga Rata-rata"}),r.jsx("p",{className:"text-2xl font-bold text-gray-800",children:f.formatCurrency(l?.average_price||0)})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Properti Ramah Iklim"}),r.jsx("p",{className:"text-2xl font-bold text-gray-800",children:f.formatPercentage(l?.climate_safe_percentage||0,1)})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Skor Iklim Rata-rata"}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:`w-3 h-3 rounded-full mr-2 ${f.getClimateScoreColor(l?.avg_climate_scores?.overall)}`}),r.jsx("p",{className:"text-2xl font-bold text-gray-800",children:Math.round(l?.avg_climate_scores?.overall||0)})]})]})]}),(0,r.jsxs)(Tabs,{defaultValue:"price",className:"mb-6",onValueChange:k,children:[(0,r.jsxs)(TabsList,{className:"mb-4 bg-transparent border-b border-gray-200 w-full justify-start space-x-4 rounded-none p-0",children:[r.jsx(TabsTrigger,{value:"price",className:"px-2 py-2 rounded-t-md data-[state=active]:border-b-2 data-[state=active]:border-blue-600 data-[state=active]:bg-transparent data-[state=active]:text-blue-600 data-[state=active]:shadow-none",children:"Analisis Harga"}),r.jsx(TabsTrigger,{value:"climate",className:"px-2 py-2 rounded-t-md data-[state=active]:border-b-2 data-[state=active]:border-blue-600 data-[state=active]:bg-transparent data-[state=active]:text-blue-600 data-[state=active]:shadow-none",children:"Analisis Iklim"}),r.jsx(TabsTrigger,{value:"property",className:"px-2 py-2 rounded-t-md data-[state=active]:border-b-2 data-[state=active]:border-blue-600 data-[state=active]:bg-transparent data-[state=active]:text-blue-600 data-[state=active]:shadow-none",children:"Jenis Properti"}),r.jsx(TabsTrigger,{value:"relationships",className:"px-2 py-2 rounded-t-md data-[state=active]:border-b-2 data-[state=active]:border-blue-600 data-[state=active]:bg-transparent data-[state=active]:text-blue-600 data-[state=active]:shadow-none",children:"Hubungan Variabel"})]}),(0,r.jsxs)(TabsContent,{value:"price",className:"mt-0",children:[r.jsx("div",{className:"mb-4 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex space-x-4",children:[r.jsx("button",{className:`px-2 py-2 text-sm font-medium ${"distribution"===z?"border-b-2 border-blue-600 text-blue-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>V("distribution"),children:"Distribusi Harga Properti"}),r.jsx("button",{className:`px-2 py-2 text-sm font-medium ${"landDistribution"===z?"border-b-2 border-blue-600 text-blue-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>V("landDistribution"),children:"Distribusi Harga Tanah"}),r.jsx("button",{className:`px-2 py-2 text-sm font-medium ${"certificates"===z?"border-b-2 border-blue-600 text-blue-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>V("certificates"),children:"Sertifikat"})]})}),"distribution"===z&&(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[o.length>0&&r.jsx(AnalyticsChart,{type:"horizontalBar",data:o.slice(0,10),xKey:"district",yKey:"average_price",title:"Harga Properti Rata-rata per Kecamatan",dataKey:"Harga",height:400,currency:!0,sorting:"desc"}),getPriceDistributionData().length>0&&r.jsx(AnalyticsChart,{type:"pie",data:getPriceDistributionData(),xKey:"range",yKey:"count",title:"Distribusi Harga Properti",height:400,colors:["#93C5FD","#60A5FA","#3B82F6","#2563EB","#1D4ED8"],showLabels:!0})]}),"landDistribution"===z&&(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[getLandPriceDistributionData().length>0&&r.jsx(AnalyticsChart,{type:"pie",data:getLandPriceDistributionData(),xKey:"range",yKey:"count",title:"Distribusi Harga Tanah per Meter Persegi",height:400,colors:["#93C5FD","#60A5FA","#3B82F6","#2563EB","#1D4ED8"],showLabels:!0}),$.length>0&&r.jsx(AnalyticsChart,{type:"horizontalBar",data:$.slice(0,10),xKey:"district",yKey:"avg_land_price",title:"Harga Tanah Rata-rata per Kecamatan",dataKey:"Harga/m\xb2",height:400,currency:!0,sorting:"desc"})]}),"certificates"===z&&(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[getCertificateDistributionData().length>0&&r.jsx(AnalyticsChart,{type:"pie",data:getCertificateDistributionData(),xKey:"certificate",yKey:"count",title:"Distribusi Jenis Sertifikat",height:400,colors:["#10B981","#34D399","#6EE7B7","#A7F3D0","#D1FAE5"],showLabels:!0}),getPriceByCertificateData().length>0&&r.jsx(AnalyticsChart,{type:"bar",data:getPriceByCertificateData(),xKey:"certificate",yKey:"average_price",title:"Harga Rata-rata Berdasarkan Jenis Sertifikat",height:400,currency:!0,colors:["#10B981"],dataKey:"Harga Rata-rata"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[p.length>0&&r.jsx(AnalyticsChart,{type:"bar",data:p,xKey:"bedrooms",yKey:"count",title:"Distribusi Properti Berdasarkan Jumlah Kamar Tidur",height:350,colors:["#3B82F6"],dataKey:"Jumlah Properti"}),getPropertyTypeData().length>0&&r.jsx(AnalyticsChart,{type:"pie",data:getPropertyTypeData(),xKey:"type",yKey:"count",title:"Distribusi Tipe Properti",height:350,colors:["#10B981","#34D399","#6EE7B7","#A7F3D0","#D1FAE5"],showLabels:!0})]})]}),(0,r.jsxs)(TabsContent,{value:"climate",className:"mt-0",children:[(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md mb-6",children:[r.jsx("h3",{className:"font-medium mb-2 text-black",children:"Metrik Iklim"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(q).map(([e,t])=>r.jsx("button",{onClick:()=>v(e),className:`px-3 py-1 text-sm rounded-md ${b===e?"bg-blue-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:t},e))})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[getClimateDataForChart().length>0&&r.jsx(AnalyticsChart,{type:"horizontalBar",data:getClimateDataForChart(),xKey:"district",yKey:"score",title:`${q[b]} per Kecamatan`,height:400,colors:["#10B981"],dataKey:"Skor Iklim"}),u.length>0&&"overall_score"===b&&r.jsx(AnalyticsChart,{type:"bar",data:getClimateImpactData("Overall Climate Score"),xKey:"range",yKey:"impact",title:"Dampak Skor Iklim terhadap Harga Properti",height:400,percentage:!0,colors:["#3B82F6"],dataKey:"Dampak ke Harga",xAxisLabel:"Rentang Skor",yAxisLabel:"Dampak ke Harga (%)"}),u.length>0&&"lst_score"===b&&r.jsx(AnalyticsChart,{type:"bar",data:getClimateImpactData("LST Score"),xKey:"range",yKey:"impact",title:"Dampak Suhu Permukaan Tanah terhadap Harga Properti",height:400,percentage:!0,colors:["#EF4444"],dataKey:"Dampak ke Harga",xAxisLabel:"Rentang Skor",yAxisLabel:"Dampak ke Harga (%)"}),u.length>0&&"ndvi_score"===b&&r.jsx(AnalyticsChart,{type:"bar",data:getClimateImpactData("NDVI Score"),xKey:"range",yKey:"impact",title:"Dampak Indeks Vegetasi terhadap Harga Properti",height:400,percentage:!0,colors:["#10B981"],dataKey:"Dampak ke Harga",xAxisLabel:"Rentang Skor",yAxisLabel:"Dampak ke Harga (%)"}),u.length>0&&"utfvi_score"===b&&r.jsx(AnalyticsChart,{type:"bar",data:getClimateImpactData("UTFVI Score"),xKey:"range",yKey:"impact",title:"Dampak Indeks Termal Perkotaan terhadap Harga Properti",height:400,percentage:!0,colors:["#F59E0B"],dataKey:"Dampak ke Harga",xAxisLabel:"Rentang Skor",yAxisLabel:"Dampak ke Harga (%)"}),u.length>0&&"uhi_score"===b&&r.jsx(AnalyticsChart,{type:"bar",data:getClimateImpactData("UHI Score"),xKey:"range",yKey:"impact",title:"Dampak Urban Heat Island terhadap Harga Properti",height:400,percentage:!0,colors:["#8B5CF6"],dataKey:"Dampak ke Harga",xAxisLabel:"Rentang Skor",yAxisLabel:"Dampak ke Harga (%)"})]})]}),(0,r.jsxs)(TabsContent,{value:"property",className:"mt-0",children:[r.jsx("div",{className:"grid grid-cols-1 gap-6 mb-6",children:o.length>0&&r.jsx(AnalyticsChart,{type:"horizontalBar",data:o.slice(0,10).map(e=>({...e,property_count:e.property_count||0})),xKey:"district",yKey:["average_price","property_count"],title:"Harga dan Jumlah Properti per Kecamatan",height:400,stacked:!1,dataKey:"Nilai"})}),r.jsx("div",{className:"gap-6",children:l&&l.avg_climate_scores&&(0,r.jsxs)("div",{className:"bg-white w-full p-4 rounded-lg shadow-md text-black",children:[r.jsx("h3",{className:"font-bold text-lg mb-4",children:"Rata-rata Skor Iklim"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between mb-1",children:[r.jsx("span",{className:"text-sm font-medium",children:"Suhu Permukaan Tanah (LST)"}),r.jsx("span",{className:"text-sm font-medium",children:Math.round(l.avg_climate_scores.lst||0)})]}),r.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-red-500",style:{width:`${l.avg_climate_scores.lst}%`}})})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between mb-1",children:[r.jsx("span",{className:"text-sm font-medium",children:"Indeks Vegetasi (NDVI)"}),r.jsx("span",{className:"text-sm font-medium",children:Math.round(l.avg_climate_scores.ndvi||0)})]}),r.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-green-500",style:{width:`${l.avg_climate_scores.ndvi}%`}})})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between mb-1",children:[r.jsx("span",{className:"text-sm font-medium",children:"Indeks Termal Perkotaan (UTFVI)"}),r.jsx("span",{className:"text-sm font-medium",children:Math.round(l.avg_climate_scores.utfvi||0)})]}),r.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-yellow-500",style:{width:`${l.avg_climate_scores.utfvi}%`}})})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between mb-1",children:[r.jsx("span",{className:"text-sm font-medium",children:"Pulau Panas Perkotaan (UHI)"}),r.jsx("span",{className:"text-sm font-medium",children:Math.round(l.avg_climate_scores.uhi||0)})]}),r.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-purple-500",style:{width:`${l.avg_climate_scores.uhi}%`}})})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between mb-1",children:[r.jsx("span",{className:"text-sm font-medium font-bold",children:"Skor Iklim Keseluruhan"}),r.jsx("span",{className:"text-sm font-medium font-bold",children:Math.round(l.avg_climate_scores.overall||0)})]}),r.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-blue-600",style:{width:`${l.avg_climate_scores.overall}%`}})})]})]})]})})]}),(0,r.jsxs)(TabsContent,{value:"relationships",className:"mt-0",children:[r.jsx("div",{className:"mb-4 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex space-x-4 overflow-x-auto pb-1",children:[r.jsx("button",{className:`px-4 py-2 text-sm font-medium whitespace-nowrap ${"priceVsClimate"===M?"border-b-2 border-blue-600 text-blue-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>U("priceVsClimate"),children:"Harga vs Skor Iklim"}),r.jsx("button",{className:`px-4 py-2 text-sm font-medium whitespace-nowrap ${"priceVsLandPrice"===M?"border-b-2 border-blue-600 text-blue-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>U("priceVsLandPrice"),children:"Harga Properti vs Harga Tanah"}),r.jsx("button",{className:`px-4 py-2 text-sm font-medium whitespace-nowrap ${"priceVsLandArea"===M?"border-b-2 border-blue-600 text-blue-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>U("priceVsLandArea"),children:"Harga vs Luas Tanah"}),r.jsx("button",{className:`px-4 py-2 text-sm font-medium whitespace-nowrap ${"landPriceVsClimate"===M?"border-b-2 border-blue-600 text-blue-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>U("landPriceVsClimate"),children:"Harga Tanah vs Skor Iklim"}),r.jsx("button",{className:`px-4 py-2 text-sm font-medium whitespace-nowrap ${"multiFactorAnalysis"===M?"border-b-2 border-blue-600 text-blue-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>U("multiFactorAnalysis"),children:"Analisis Multi-Faktor"})]})}),"priceVsClimate"===M&&r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:P.length>0&&(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md col-span-2 py-12",children:[r.jsx("h3",{className:"font-bold text-lg mb-4 text-gray-800",children:"Hubungan Harga Properti dengan Skor Iklim"}),r.jsx("div",{className:"h-80",children:r.jsx(AnalyticsChart,{type:"line",data:formatScatterData(P,"climate_score","price"),xKey:"x",yKey:"y",title:"",dataKey:"Harga",height:300,currency:!0,colors:["#3B82F6"],xAxisLabel:"Skor Iklim",yAxisLabel:"Harga Properti (Rp)",binData:!0,numBins:8,legend:{verticalAlign:"top",align:"right",wrapperStyle:{fontSize:12,paddingTop:0}}})})]})}),"priceVsLandPrice"===M&&r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:T.length>0&&(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md col-span-2 py-12",children:[r.jsx("h3",{className:"font-bold text-lg mb-4 text-gray-800",children:"Hubungan Harga Properti dengan Harga Tanah"}),r.jsx("div",{className:"h-80",children:r.jsx(AnalyticsChart,{type:"line",data:formatScatterData(T,"land_price","property_price"),xKey:"x",yKey:"y",title:"",dataKey:"Harga Properti",height:300,currency:!0,colors:["#10B981"],xAxisLabel:"Harga Tanah per m\xb2 (Rp)",yAxisLabel:"Harga Properti (Rp)",binData:!0,numBins:8,legend:{verticalAlign:"top",align:"right",wrapperStyle:{fontSize:12,paddingTop:0}}})})]})}),"priceVsLandArea"===M&&r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:B.length>0&&(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md col-span-2 py-12",children:[r.jsx("h3",{className:"font-bold text-lg mb-4 text-gray-800",children:"Hubungan Harga Properti dengan Luas Tanah"}),r.jsx("div",{className:"h-80",children:r.jsx(AnalyticsChart,{type:"line",data:formatScatterData(B,"land_area","property_price"),xKey:"x",yKey:"y",title:"",dataKey:"Harga Properti",height:300,currency:!0,colors:["#F59E0B"],xAxisLabel:"Luas Tanah (m\xb2)",yAxisLabel:"Harga Properti (Rp)",binData:!0,numBins:8,legend:{verticalAlign:"top",align:"right",wrapperStyle:{fontSize:12,paddingTop:0}}})})]})}),"landPriceVsClimate"===M&&r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:I.length>0&&(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md col-span-2 py-12",children:[r.jsx("h3",{className:"font-bold text-lg mb-4 text-gray-800",children:"Hubungan Harga Tanah dengan Skor Iklim"}),r.jsx("div",{className:"h-80",children:r.jsx(AnalyticsChart,{type:"line",data:formatScatterData(I,"climate_score","land_price"),xKey:"x",yKey:"y",title:"",dataKey:"Harga Tanah/m\xb2",height:300,currency:!0,colors:["#8B5CF6"],xAxisLabel:"Skor Iklim",yAxisLabel:"Harga Tanah per m\xb2 (Rp)",binData:!0,numBins:8,legend:{verticalAlign:"top",align:"right",wrapperStyle:{fontSize:12,paddingTop:0}}})})]})}),"multiFactorAnalysis"===M&&r.jsx("div",{className:"grid grid-cols-1 gap-6 mb-6",children:$.length>0&&(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md",children:[r.jsx("h3",{className:"font-bold text-lg mb-4 text-gray-800",children:"Analisis Multi-Faktor Berdasarkan Kecamatan"}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kecamatan"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Harga Rata-rata"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Harga Tanah/m\xb2"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Luas Tanah Rata-rata"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Skor Iklim"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Jumlah Properti"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:$.sort((e,t)=>t.avg_price-e.avg_price).slice(0,10).map((e,t)=>(0,r.jsxs)("tr",{className:t%2==0?"bg-white":"bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.district}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:f.formatCurrency(e.avg_price)}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[f.formatCurrency(e.avg_land_price),"/m\xb2"]}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[Math.round(e.avg_land_area)," m\xb2"]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${f.getClimateScoreColor(e.avg_climate_score)} mr-2`}),r.jsx("span",{children:Math.round(e.avg_climate_score)})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.property_count})]},t))})]})})]})})]})]})]})]})}),r.jsx(w.Z,{})]})}},32213:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>l,__esModule:()=>i,default:()=>o});var r=a(17536);let s=(0,r.createProxy)(String.raw`E:\Coding\WGC2025\smart-property\frontend\src\app\analytics\page.tsx`),{__esModule:i,$$typeof:l}=s,n=s.default,o=n}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[973,447,468,380,350],()=>__webpack_exec__(79837));module.exports=a})();