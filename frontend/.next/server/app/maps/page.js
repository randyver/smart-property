(()=>{var e={};e.id=861,e.ids=[861],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},67411:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>m,routeModule:()=>g,tree:()=>c});var t=s(73137),r=s(54647),n=s(4183),l=s.n(n),i=s(71775),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(a,o);let d=t.AppPageRouteModule,c=["",{children:["maps",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,52070)),"E:\\Coding\\WGC2025\\smart-property\\frontend\\src\\app\\maps\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,16195)),"E:\\Coding\\WGC2025\\smart-property\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,66197)),"E:\\Coding\\WGC2025\\smart-property\\frontend\\src\\app\\not-found.tsx"]}],m=["E:\\Coding\\WGC2025\\smart-property\\frontend\\src\\app\\maps\\page.tsx"],u="/maps/page",x={require:s,loadChunk:()=>Promise.resolve()},g=new d({definition:{kind:r.x.APP_PAGE,page:"/maps/page",pathname:"/maps",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},29170:(e,a,s)=>{Promise.resolve().then(s.bind(s,11307))},11307:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>Dashboard});var t=s(60080),r=s(9885),n=s(72975),l=s.n(n),i=s(4405),o=s.n(i),d=s(47438),c=s.n(d);s(96456);var m=s(70173),u=s(56206),x=s(87094),g=s(22388),p=s(43250),h=s(26303),b=s(22385),f=s(52451),j=s.n(f),y=s(34253),k=s(32748);let v=[107.6096,-6.9147],w=12,N=(0,r.memo)(({properties:e=[],activeLayer:a,onMarkerClick:s,center:n=v,zoom:l=w,mapRef:i})=>{let d=(0,r.useRef)(null),f=(0,r.useRef)(null),[N,C]=(0,r.useState)(!1),_=(0,r.useRef)({}),[P,L]=(0,r.useState)(!0),[F,S]=(0,r.useState)(0),[$,R]=(0,r.useState)(!1),[B,T]=(0,r.useState)(void 0),E=(0,r.useRef)(!1),[z,A]=(0,r.useState)(!0),M=(0,r.useRef)({lst:[],ndvi:[],uhi:[],utfvi:[],landuse:[],ndbi:[],jaringan_jalan:[],kemiringan_lereng:[],rtrw:[]}),I=(0,r.useRef)({lst:1,ndvi:1,uhi:1,utfvi:1,landuse:1,ndbi:1,jaringan_jalan:1,kemiringan_lereng:1,rtrw:1}),D=(0,r.useRef)({lst:1,ndvi:1,uhi:1,utfvi:1,landuse:1,ndbi:1,jaringan_jalan:1,kemiringan_lereng:1,rtrw:1}),H=(0,r.useRef)(null),K=(0,r.useRef)(void 0),Z="68045407ce3f3583122422c9",J=process.env.NEXT_PUBLIC_API_URL||"http://localhost:5000",U={uhi:{name:"Pulau Panas Perkotaan - UHI",colors:["#F5F500","#F5CA00","#FA9600","#EE5D00","#C70000"],gridcodeCount:5,legendLabels:["Sangat Lemah (<0)","Lemah (0-0.005)","Sedang (0.005-0.01)","Kuat (0.01-0.015)","Sangat Kuat (>0.015)"],image:"/peta-uhi.jpg"},utfvi:{name:"Tekanan Panas Perkotaan - UTFVI",colors:["#5C09FC","#4EC9FD","#B4FEA3","#FBD513","#FE230A"],gridcodeCount:5,legendLabels:["Non (<0)","Lemah (0-0.005)","Sedang (0.005-0.01)","Kuat (0.01-0.015)","Sangat Kuat (>0.015)"],image:"/peta-utfvi.jpg"},lst:{name:"Suhu Permukaan Tanah - LST",colors:["#F5F500","#F5B800","#F57A00","#F53D00","#F50000"],gridcodeCount:5,legendLabels:["Sangat Dingin (<24\xb0C)","Dingin (24-28\xb0C)","Sedang (28-32\xb0C)","Panas (32-36\xb0C)","Sangat Panas (>36\xb0C)"],image:"/peta-lst.jpg"},ndvi:{name:"Tutupan Hijau - NDVI",colors:["#A50026","#FF0000","#FFFF00","#86CB66","#4C7300"],gridcodeCount:5,legendLabels:["Non-vegetasi (<0.2)","Sangat Jarang (0.2-0.4)","Jarang (0.4-0.6)","Sedang (0.6-0.8)","Lebat (>0.8)"],image:"/peta-ndvi.jpg"},landuse:{name:"Penggunaan Lahan",colors:["#007206","#FFAA00","#FFFF4C","#FFC9B9","#FC3B09","#B4B4B4","#5C09FC"],gridcodeCount:7,legendLabels:["Tutupan Pohon","Semak Belukar","Padang Rumput","Lahan Pertanian","Area Terbangun","Lahan Kosong","Badan Air"],image:"/peta-landuse.jpg"},ndbi:{name:"Kerapatan Bangunan",colors:["#FFFFE5","#FEE391","#FE9929","#CC4C02","#662506"],gridcodeCount:5,legendLabels:["Vegetasi Sangat Lebat","Vegetasi Lebat","Lahan Terbuka","Permukiman Rendah","Area Terbangun Padat"],image:"/peta-ndbi.jpg"},jaringan_jalan:{name:"Jaringan Jalan",colors:["#FF0000","#00FF00","#0000FF","#FFFF00","#FFA500"],gridcodeCount:5,legendLabels:["Jalan Utama","Jalan Sekunder","Badan Air","Lahan Pertanian","Tanah Kosong"],image:"/peta-jaringan-jalan.jpg"},kemiringan_lereng:{name:"Kemiringan Lereng",colors:["#007206","#7DB810","#F2FE1E","#FFAC12","#FC3B09"],gridcodeCount:5,legendLabels:["Datar (0-8\xb0)","Landai (8-15\xb0)","Agak Curam (15-25\xb0)","Curam (25-45\xb0)","Sangat Curam (>45\xb0)"],image:"/peta-kemiringan-lereng.jpg"},rtrw:{name:"Rencana Tata Ruang Wilayah",colors:{Jalan:"#FFA77F",Bandara:"#FD8B20","Hutan Lindung":"#00A884","Industri Gudang":"#FDCDB3",Kesehatan:"#B6C7FD",Pendidikan:"#44418C",Perdagangan:"#E03500",Perkantoran:"#A900E6","Permukiman Padat":"#E6C600","Pertahanan dan Keamanan":"#A87000",Pertanian:"#38A800","Perumahan Kerapan Rendah":"#FFFF00",RTnH:"#737300",RTH:"#00FFC5",Sungai:"#0070FF"},legendLabels:["Jalan","Bandara","Hutan Lindung","Industri Gudang","Kesehatan","Pendidikan","Perdagangan","Perkantoran","Permukiman Padat","Pertahanan dan Keamanan","Pertanian","Perumahan Kerapan Rendah","RTH","RTnH","Sungai"],image:"/foto-rtrw.jpg"}};(0,r.useEffect)(()=>{if(f.current||!d.current)return;let e=new(c()).Map({container:d.current,style:`https://basemap.mapid.io/styles/basic/style.json?key=${Z}`,center:n,zoom:l});return e.on("load",()=>{C(!0),console.log("Map style fully loaded")}),e.addControl(new(c()).NavigationControl,"top-right"),f.current=e,i&&(i.current=e),()=>{f.current&&(f.current.remove(),f.current=null),H.current?.abort()}},[Z,n,l,i]),(0,r.useEffect)(()=>{E.current&&!$&&(console.log("Loading completed, checking if there is a pending layer"),B&&(console.log(`Applying pending layer: ${B}`),G(B),T(void 0))),E.current=$},[$]);let G=(0,r.useCallback)(e=>{s&&(void 0===e?s(0):"lst"===e?s(1):"ndvi"===e?s(2):"uhi"===e?s(3):"utfvi"===e?s(4):"landuse"===e?s(5):"ndbi"===e?s(6):"jaringan_jalan"===e?s(7):"kemiringan_lereng"===e?s(8):"rtrw"===e&&s(9))},[s]),V=(0,r.useCallback)(async e=>{if(!e||!f.current)return;console.log(`Starting to load climate data for ${e}`),R(!0),S(0),0===M.current[e].length&&(I.current[e]=1),H.current&&H.current.abort(),H.current=new AbortController;let a=f.current,s=`${e}-source`,t=`${e}-layer`,r=`${e}-outline`;try{a.isStyleLoaded()||await new Promise(e=>{a.once("style.load",()=>e())}),0===M.current[e].length&&(I.current[e]=1,S(0));let loadPage=async n=>{console.log(`Loading ${e} page ${n}`);try{let l=await fetch(`${J}/api/data/geojson/${e}?page=${n}&per_page=1000`,{signal:H.current?.signal});if(!l.ok)throw Error(`Failed to load ${e} data: ${l.statusText}`);let i=await l.json(),o=i.features||i.data?.features||[],d=i.total_features||i.data?.total_features||o.length,c=i.total_pages||i.pagination?.total_pages||1;console.log(`Loaded ${o.length} features for ${e}, page ${n}/${c}`),D.current[e]=c,M.current[e]=[...M.current[e],...o],S(Math.min(100,Math.round(M.current[e].length/d*100))),a.getSource(s)?(a.getSource(s).setData({type:"FeatureCollection",features:M.current[e]}),a.setLayoutProperty(t,"visibility","visible"),a.setLayoutProperty(r,"visibility","visible")):(console.log(`Creating new source for ${e}`),a.addSource(s,{type:"geojson",data:{type:"FeatureCollection",features:M.current[e]}}),"rtrw"===e?a.addLayer({id:t,type:"fill",source:s,layout:{visibility:"visible"},paint:{"fill-color":["match",["get","NAMA"],"Bandara",U.rtrw.colors.Bandara,"Hutan Lindung",U.rtrw.colors["Hutan Lindung"],"Industri Gudang",U.rtrw.colors["Industri Gudang"],"Kesehatan",U.rtrw.colors.Kesehatan,"Pendidikan",U.rtrw.colors.Pendidikan,"Perdagangan",U.rtrw.colors.Perdagangan,"Perkantoran",U.rtrw.colors.Perkantoran,"Pertahanan dan Keamanan",U.rtrw.colors["Pertahanan dan Keamanan"],"Pertanian",U.rtrw.colors.Pertanian,"Perumahan Kerapan Rendah",U.rtrw.colors["Perumahan Kerapan Rendah"],"RTH",U.rtrw.colors.RTH,"RTnH",U.rtrw.colors.RTnH,"#E6C600"],"fill-opacity":.7}}):"landuse"===e?a.addLayer({id:t,type:"fill",source:s,layout:{visibility:"visible"},paint:{"fill-color":["match",["get","gridcode"],10,"#007206",20,"#FFAA00",30,"#FFFF4C",40,"#FFC9B9",50,"#FC3B09",60,"#B4B4B4",80,"#5C09FC","#000000"],"fill-opacity":.7}}):a.addLayer({id:t,type:"fill",source:s,layout:{visibility:"visible"},paint:{"fill-color":["match",["get","gridcode"],1,U[e].colors[0],2,U[e].colors[1],3,U[e].colors[2],4,U[e].colors[3],5,U[e].colors[4],...U[e].gridcodeCount>5?[6,U[e].colors[5],7,U[e].colors[6],8,U[e].colors[7]]:[],U[e].colors[0]],"fill-opacity":.7}}),a.addLayer({id:r,type:"line",source:s,layout:{visibility:"visible"},paint:{"line-color":"#000","line-width":"rtrw"===e?1:0,"line-opacity":.3}})),n<c?(I.current[e]=n+1,await loadPage(I.current[e])):R(!1)}catch(a){a instanceof Error&&("AbortError"!==a.name?(console.error(`Error loading ${e} page ${n}:`,a),R(!1)):console.log(`Loading ${e} aborted`))}};await loadPage(I.current[e])}catch(e){console.error("Error in loadClimateData:",e),R(!1)}},[J]),W=(0,r.useCallback)((e,a)=>{if(!f.current)return;let s=f.current,t=`${e}-layer`,r=`${e}-outline`;s.getLayer(t)&&s.setLayoutProperty(t,"visibility",a?"visible":"none"),s.getLayer(r)&&s.setLayoutProperty(r,"visibility",a?"visible":"none")},[]);(0,r.useEffect)(()=>{N&&f.current&&(Object.keys(U).forEach(e=>{W(e,!1)}),a&&(console.log(`Setting active layer to ${a}`),0===M.current[a].length?V(a):W(a,!0)),K.current=a)},[a,N,V,W]),(0,r.useEffect)(()=>{if(!N||!f.current)return;let a=f.current,addMarkers=()=>{Object.values(_.current).forEach(e=>e.remove()),_.current={},P&&e.forEach(e=>{if(!e.location?.latitude||!e.location?.longitude)return;let t=document.createElement("div");t.className="property-marker";let r=e.climate_scores?.overall_score||e.climate_risk_score,n=getScoreColor(r);t.innerHTML=`
          <div class="marker-container" style="background-color: ${n}">
            <span>${r??"?"}</span>
          </div>
        `;let l=new(c()).Marker({element:t}).setLngLat([e.location.longitude,e.location.latitude]).addTo(a);t.onclick=a=>{a.stopPropagation(),s?.(e.id)},_.current[e.id]=l})};a.isStyleLoaded()?addMarkers():a.once("style.load",addMarkers)},[e,N,P,s]);let getScoreColor=e=>null==e?"#9ca3af":e>=85?"#059669":e>=75?"#10b981":e>=65?"#eab308":e>=55?"#f97316":"#dc2626",toggleLayerPanel=()=>{A(e=>!e)},clearLayer=e=>{e.stopPropagation(),$&&(console.log("Currently loading, setting pending layer to null"),T(void 0),H.current&&H.current.abort()),G(void 0),R(!1)},handleLayerSelect=e=>{if(console.log(`Layer selected: ${e}`),e!==a){if(a){console.log("There's already an active layer, please clear it first");return}if($){console.log(`Loading in progress, setting ${e} as pending layer`),T(e);return}L(!1),e&&(M.current[e]=[],I.current[e]=1),G(e)}};return(0,t.jsxs)("div",{className:"jsx-65a85d6f552507aa w-full h-full relative",children:[t.jsx("div",{ref:d,className:"jsx-65a85d6f552507aa mt-16 w-full h-full"}),$&&(0,t.jsxs)("div",{className:"jsx-65a85d6f552507aa absolute top-8 left-4 right-4 bg-white bg-opacity-90 rounded-md p-2 z-10 shadow-md",children:[t.jsx("div",{className:"jsx-65a85d6f552507aa w-full bg-gray-200 rounded-full h-2.5",children:t.jsx("div",{style:{width:`${F}%`},className:"jsx-65a85d6f552507aa bg-blue-600 h-2.5 rounded-full"})}),(0,t.jsxs)("p",{className:"jsx-65a85d6f552507aa text-lg text-center py-2 text-gray-600",children:["Loading ",a," data... ",F,"%",B&&(0,t.jsxs)("span",{className:"jsx-65a85d6f552507aa text-xs text-blue-600 ml-2",children:["(",U[B].name," queued)"]})]})]}),!z&&t.jsx("div",{className:"jsx-65a85d6f552507aa absolute top-20 right-4 z-20",children:t.jsx("button",{onClick:toggleLayerPanel,title:"Show layer panel",className:"jsx-65a85d6f552507aa bg-white p-2 mt-12 rounded-full shadow-md hover:bg-gray-100 transition-colors",children:t.jsx(m.Z,{className:"h-5 w-5 text-gray-700"})})}),z&&(0,t.jsxs)("div",{className:"jsx-65a85d6f552507aa absolute top-32 right-4 bg-white rounded-xl shadow-md z-10 w-80 max-h-[400px] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"jsx-65a85d6f552507aa flex justify-between items-center border-b pb-2 pt-2 px-3 sticky top-0 bg-white",children:[t.jsx("h3",{className:"jsx-65a85d6f552507aa text-sm font-bold text-gray-800",children:"Map Layers"}),(0,t.jsxs)("div",{className:"jsx-65a85d6f552507aa flex items-center gap-2",children:[(0,t.jsxs)(k.J2,{children:[t.jsx(k.xo,{asChild:!0,children:t.jsx("button",{title:"Informasi Layer",className:"jsx-65a85d6f552507aa p-1 rounded-full hover:bg-blue-50 text-blue-600",children:t.jsx(y.Z,{className:"h-5 w-5"})})}),(0,t.jsxs)(k.yk,{className:"w-72 p-4 text-sm",side:"left",children:[t.jsx("h4",{className:"jsx-65a85d6f552507aa font-bold text-gray-800 mb-2",children:"Penjelasan Layer Peta"}),t.jsx("div",{className:"jsx-65a85d6f552507aa space-y-3 max-h-[300px] overflow-y-auto pr-2",children:Object.entries({lst:"Suhu Permukaan Tanah (LST) menunjukkan seberapa panas permukaan tanah di area tersebut. Skor yang lebih tinggi menunjukkan suhu yang lebih sejuk dan nyaman untuk ditinggali.",ndvi:"Indeks Vegetasi (NDVI) mengukur kepadatan tutupan hijau di area tersebut. Skor yang lebih tinggi menandakan lebih banyak pohon dan tanaman yang membantu menyerap panas dan memperbaiki kualitas udara.",uhi:"Pulau Panas Perkotaan (UHI) mengukur seberapa panas suatu area dibandingkan dengan daerah sekitarnya karena pembangunan perkotaan. Skor yang lebih tinggi berarti area yang lebih sejuk dengan efek pulau panas yang minimal.",utfvi:"Indeks Variansi Termal Perkotaan (UTFVI) mengukur fluktuasi suhu di area perkotaan. Skor yang lebih tinggi menunjukkan kondisi suhu yang lebih stabil.",landuse:"Penggunaan Lahan menunjukkan bagaimana lahan digunakan di area tersebut, seperti daerah terbangun, vegetasi, badan air, atau lahan pertanian. Penting untuk memahami karakteristik lingkungan sekitar.",ndbi:"Indeks Kerapatan Bangunan (NDBI) mengukur tingkat pembangunan di suatu area. Skor yang lebih rendah biasanya menunjukkan area yang lebih hijau dan kurang padat.",jaringan_jalan:"Jaringan Jalan menampilkan jalan utama dan sekunder di area tersebut, membantu Anda memahami aksesibilitas dan potensi kebisingan/polusi.",kemiringan_lereng:"Kemiringan Lereng menunjukkan tingkat kecuraman tanah. Area yang lebih datar (skor rendah) biasanya lebih aman dari risiko longsor dan lebih mudah untuk pembangunan.",rtrw:"Rencana Tata Ruang Wilayah menunjukkan rencana penggunaan lahan resmi dari pemerintah, termasuk zona perumahan, komersial, ruang terbuka, dll. Penting untuk memastikan properti sesuai dengan perencanaan kota."}).map(([e,a])=>(0,t.jsxs)("div",{className:"jsx-65a85d6f552507aa pb-2 border-b border-gray-100",children:[t.jsx("p",{className:"jsx-65a85d6f552507aa font-medium text-gray-800 mb-1",children:e in U?U[e].name:e}),t.jsx("p",{className:"jsx-65a85d6f552507aa text-gray-600 text-xs",children:a})]},e))})]})]}),t.jsx("button",{onClick:toggleLayerPanel,title:"Close panel",className:"jsx-65a85d6f552507aa text-gray-500 hover:text-gray-700",children:t.jsx(u.Z,{className:"h-5 w-5"})})]})]}),t.jsx("div",{className:"jsx-65a85d6f552507aa mb-3 px-2 py-2 bg-yellow-50 text-amber-700 text-xs rounded border border-amber-200 mx-3 mt-2",children:t.jsx("p",{className:"jsx-65a85d6f552507aa",children:"Untuk mengganti lapisan iklim, klik ikon tempat sampah untuk menghapus lapisan saat ini terlebih dahulu, kemudian pilih yang baru."})}),t.jsx("div",{className:"jsx-65a85d6f552507aa mb-3 border-b pb-2 px-2",children:(0,t.jsxs)("div",{className:"jsx-65a85d6f552507aa flex items-center justify-between px-3 py-2 text-sm rounded-md transition-colors hover:bg-gray-50",children:[(0,t.jsxs)("div",{className:"jsx-65a85d6f552507aa flex items-center",children:[t.jsx(x.Z,{className:"h-4 w-4 mr-2 text-gray-600"}),t.jsx("span",{className:"jsx-65a85d6f552507aa truncate text-xs",children:"Lokasi Properti"})]}),t.jsx("button",{onClick:()=>{L(e=>!e)},title:P?"Hide properties":"Show properties",className:"jsx-65a85d6f552507aa p-1 text-gray-600 hover:text-blue-600",children:P?t.jsx(g.Z,{className:"h-4 w-4"}):t.jsx(p.Z,{className:"h-4 w-4"})})]})}),t.jsx("h4",{className:"jsx-65a85d6f552507aa text-xs font-medium text-gray-600 mb-1 px-2 top-[68px] bg-white pt-2",children:"Layer Iklim"}),t.jsx("div",{className:"jsx-65a85d6f552507aa space-y-1 px-2 pb-4",children:Object.entries(U).filter(([e])=>["lst","ndvi","utfvi","uhi"].includes(e)).map(([e,s])=>(0,t.jsxs)("div",{className:`jsx-65a85d6f552507aa flex items-center justify-between px-3 py-2 text-sm rounded-md transition-colors ${a===e?"bg-blue-50":"hover:bg-gray-50"}`,children:[(0,t.jsxs)("div",{className:"jsx-65a85d6f552507aa flex items-center",children:[t.jsx(j(),{width:60,height:60,src:s.image,alt:s.name,className:"mr-2 rounded-md object-cover"}),t.jsx("span",{className:"jsx-65a85d6f552507aa truncate text-xs",children:s.name})]}),(0,t.jsxs)("div",{className:"jsx-65a85d6f552507aa flex space-x-1",children:[a===e&&t.jsx("button",{onClick:clearLayer,title:"Remove layer",className:"jsx-65a85d6f552507aa p-1 text-red-600 hover:text-red-800",children:t.jsx(h.Z,{className:"h-4 w-4"})}),!a&&t.jsx("button",{onClick:()=>handleLayerSelect(e),title:`Add ${s.name} layer`,className:"jsx-65a85d6f552507aa p-1 text-blue-600 hover:text-blue-800",children:t.jsx(b.Z,{className:"h-4 w-4"})}),a&&a!==e&&(0,t.jsxs)("div",{className:"jsx-65a85d6f552507aa flex space-x-1",children:[t.jsx("button",{disabled:!0,title:"Clear active layer first",className:"jsx-65a85d6f552507aa p-1 text-gray-400 cursor-not-allowed",children:t.jsx(h.Z,{className:"h-4 w-4"})}),t.jsx("button",{disabled:!0,title:"Clear active layer first",className:"jsx-65a85d6f552507aa p-1 text-gray-400 cursor-not-allowed",children:t.jsx(b.Z,{className:"h-4 w-4"})})]})]})]},e))}),t.jsx("h4",{className:"jsx-65a85d6f552507aa text-xs font-medium text-gray-600 mb-1 px-2 bg-white pt-2",children:"Layer Tata Kota"}),t.jsx("div",{className:"jsx-65a85d6f552507aa space-y-1 px-2 pb-4",children:Object.entries(U).filter(([e])=>["jaringan_jalan","landuse","kemiringan_lereng","rtrw","ndbi"].includes(e)).map(([e,s])=>(0,t.jsxs)("div",{className:`jsx-65a85d6f552507aa flex items-center justify-between px-3 py-2 text-sm rounded-md transition-colors ${a===e?"bg-blue-50":"hover:bg-gray-50"}`,children:[(0,t.jsxs)("div",{className:"jsx-65a85d6f552507aa flex items-center",children:[t.jsx(j(),{width:60,height:60,src:s.image,alt:s.name,className:"mr-2 rounded-md object-cover"}),t.jsx("span",{className:"jsx-65a85d6f552507aa truncate text-xs",children:s.name})]}),(0,t.jsxs)("div",{className:"jsx-65a85d6f552507aa flex space-x-1",children:[a===e&&t.jsx("button",{onClick:clearLayer,title:"Remove layer",className:"jsx-65a85d6f552507aa p-1 text-red-600 hover:text-red-800",children:t.jsx(h.Z,{className:"h-4 w-4"})}),!a&&t.jsx("button",{onClick:()=>handleLayerSelect(e),title:`Add ${s.name} layer`,className:"jsx-65a85d6f552507aa p-1 text-blue-600 hover:text-blue-800",children:t.jsx(b.Z,{className:"h-4 w-4"})}),a&&a!==e&&(0,t.jsxs)("div",{className:"jsx-65a85d6f552507aa flex space-x-1",children:[t.jsx("button",{disabled:!0,title:"Clear active layer first",className:"jsx-65a85d6f552507aa p-1 text-gray-400 cursor-not-allowed",children:t.jsx(h.Z,{className:"h-4 w-4"})}),t.jsx("button",{disabled:!0,title:"Clear active layer first",className:"jsx-65a85d6f552507aa p-1 text-gray-400 cursor-not-allowed",children:t.jsx(b.Z,{className:"h-4 w-4"})})]})]})]},e))})]}),a&&(0,t.jsxs)("div",{className:"jsx-65a85d6f552507aa absolute bottom-20 left-4 bg-white p-3 rounded-md shadow-md z-10 max-w-xs",children:[(0,t.jsxs)("h4",{className:"jsx-65a85d6f552507aa text-sm font-bold mb-2 text-gray-800",children:["Legenda ",U[a].name]}),t.jsx("div",{className:"jsx-65a85d6f552507aa space-y-1",children:"rtrw"===a?U[a].legendLabels.map((e,s)=>{let r=U[a].colors[e]||"#CCCCCC";return(0,t.jsxs)("div",{className:"jsx-65a85d6f552507aa flex items-center",children:[t.jsx("div",{style:{backgroundColor:r},className:"jsx-65a85d6f552507aa w-4 h-4 mr-2"}),t.jsx("span",{className:"jsx-65a85d6f552507aa text-xs text-gray-700",children:e})]},s)}):"jaringan_jalan"!==a?U[a].colors.slice(0,U[a].gridcodeCount).map((e,s)=>(0,t.jsxs)("div",{className:"jsx-65a85d6f552507aa flex items-center",children:[t.jsx("div",{style:{backgroundColor:e},className:"jsx-65a85d6f552507aa w-4 h-4 mr-2"}),t.jsx("span",{className:"jsx-65a85d6f552507aa text-xs text-gray-700",children:U[a].legendLabels[s]})]},s)):null})]}),t.jsx(o(),{id:"65a85d6f552507aa",children:".property-marker{cursor:pointer;width:40px;height:40px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;z-index:10}.marker-container{width:30px;height:30px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;color:white;font-weight:bold;font-size:.75rem;-webkit-box-shadow:0 0 5px rgba(0,0,0,.3);-moz-box-shadow:0 0 5px rgba(0,0,0,.3);box-shadow:0 0 5px rgba(0,0,0,.3);-webkit-transition:-webkit-transform.2s ease;-moz-transition:-moz-transform.2s ease;-o-transition:-o-transform.2s ease;transition:-webkit-transform.2s ease;transition:-moz-transform.2s ease;transition:-o-transform.2s ease;transition:transform.2s ease}.property-marker:hover .marker-container{-webkit-transform:scale(1.15);-moz-transform:scale(1.15);-ms-transform:scale(1.15);-o-transform:scale(1.15);transform:scale(1.15)}.maplibregl-popup{z-index:20}"})]})});N.displayName="MapComponent";var C=s(57114);function PropertyCard({property:e,onViewDetails:a,onCompare:s,isComparing:n=!1,imageUrl:l="/house-image.jpg"}){let[i,o]=(0,r.useState)(!1),d=(0,C.useRouter)(),formatPrice=e=>null==e?"Harga tidak tersedia":e>=1e9?`${(e/1e9).toFixed(1)} M`:e>=1e6?`${(e/1e6).toFixed(0)} Jt`:e.toLocaleString("id-ID"),getScoreColor=e=>null==e?"bg-gray-500":e>=85?"bg-green-600":e>=75?"bg-green-500":e>=65?"bg-yellow-500":e>=55?"bg-orange-500":"bg-red-600",getRiskColor=e=>({very_low:"bg-red-800",low:"bg-red-600",medium:"bg-yellow-500",high:"bg-orange-500",very_high:"bg-red-600",excellent:"bg-green-600",good:"bg-green-500",moderate:"bg-yellow-500",poor:"bg-orange-500",very_poor:"bg-red-600"})[e]||"bg-gray-500",formatRiskLevel=e=>({excellent:"Sangat Baik",good:"Baik",moderate:"Cukup",poor:"Buruk",very_poor:"Sangat Buruk",very_low:"Sangat Buruk",low:"Buruk",medium:"Cukup",high:"Baik",very_high:"Sangat Baik"})[e]||e;return(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden border border-gray-200 hover:shadow-lg transition duration-300 relative mb-2 sm:mb-3 cursor-pointer",onClick:()=>{d.push(`/properties/${e.id}`)},children:[t.jsx("div",{className:`absolute top-1.5 sm:top-2 right-1.5 sm:right-2 ${getScoreColor(e.climate_risk_score)} text-white font-bold p-1.5 sm:p-2 rounded-full w-6 h-6 sm:w-8 sm:h-8 flex items-center justify-center z-10 text-xs sm:text-sm`,children:e.climate_risk_score||"?"}),t.jsx("div",{className:"h-24 sm:h-32 bg-cover bg-center",style:{backgroundImage:`url(${l})`}}),(0,t.jsxs)("div",{className:"p-2 sm:p-3",children:[t.jsx("h3",{className:"font-bold text-sm sm:text-base mb-0.5 sm:mb-1 pr-6 sm:pr-8 text-gray-800 truncate",children:e.title}),(0,t.jsxs)("p",{className:"text-blue-700 font-bold text-base sm:text-lg mb-0.5 sm:mb-1",children:["Rp ",formatPrice(e.price)]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 text-xs text-gray-700 mb-1.5 sm:mb-2 gap-1",children:[(0,t.jsxs)("span",{children:[e.bedrooms??"-"," Kamar"]}),(0,t.jsxs)("span",{children:["Rp ",formatPrice(e.price_per_meter)??"-","/m\xb2"]}),(0,t.jsxs)("span",{children:[e.land_area??"-"," m\xb2 Lahan"]})]}),i&&(0,t.jsxs)("div",{className:"mt-1.5 sm:mt-2 border-t pt-1.5 sm:pt-2",children:[t.jsx("h4",{className:"font-bold mb-1 text-xs sm:text-sm text-gray-800",children:"Penilaian Risiko Iklim"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 xs:grid-cols-2 gap-1 sm:gap-2 text-xs",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("span",{className:`inline-block w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full ${getRiskColor(e.risks.surface_temperature)} mr-1`}),(0,t.jsxs)("span",{className:"text-gray-700 text-xs",children:["Suhu Permukaan: ",formatRiskLevel(e.risks.surface_temperature)]})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("span",{className:`inline-block w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full ${getRiskColor(e.risks.heat_stress)} mr-1`}),(0,t.jsxs)("span",{className:"text-gray-700 text-xs",children:["Tekanan Panas: ",formatRiskLevel(e.risks.heat_stress)]})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("span",{className:`inline-block w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full ${getRiskColor(e.risks.green_cover)} mr-1`}),(0,t.jsxs)("span",{className:"text-gray-700 text-xs",children:["Tutupan Hijau: ",formatRiskLevel(e.risks.green_cover)]})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("span",{className:`inline-block w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full ${getRiskColor(e.risks.heat_zone)} mr-1`}),(0,t.jsxs)("span",{className:"text-gray-700 text-xs",children:["Zona Panas: ",formatRiskLevel(e.risks.heat_zone)]})]})]}),e.climate_scores&&(0,t.jsxs)("div",{className:"mt-2 sm:mt-3",children:[t.jsx("h4",{className:"font-bold mb-0.5 sm:mb-1 text-xs text-gray-800",children:"Skor Iklim Terperinci"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-x-2 gap-y-1 mt-0.5 sm:mt-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-xs text-gray-700",children:"UHI:"}),(0,t.jsxs)("div",{className:"flex items-center text-black",children:[t.jsx("span",{className:`inline-block w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full ${getScoreColor(e.climate_scores.uhi_score)} mr-1`}),t.jsx("span",{className:"text-xs",children:e.climate_scores.uhi_score||"?"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-xs text-gray-700",children:"UTFVI:"}),(0,t.jsxs)("div",{className:"flex items-center text-black",children:[t.jsx("span",{className:`inline-block w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full ${getScoreColor(e.climate_scores.utfvi_score)} mr-1`}),t.jsx("span",{className:"text-xs",children:e.climate_scores.utfvi_score||"?"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-xs text-gray-700",children:"LST:"}),(0,t.jsxs)("div",{className:"flex items-center text-black",children:[t.jsx("span",{className:`inline-block w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full ${getScoreColor(e.climate_scores.lst_score)} mr-1`}),t.jsx("span",{className:"text-xs",children:e.climate_scores.lst_score||"?"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-xs text-gray-700",children:"NDVI:"}),(0,t.jsxs)("div",{className:"flex items-center text-black",children:[t.jsx("span",{className:`inline-block w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full ${getScoreColor(e.climate_scores.ndvi_score)} mr-1`}),t.jsx("span",{className:"text-xs",children:e.climate_scores.ndvi_score||"?"})]})]})]})]}),t.jsx("p",{className:"mt-1.5 sm:mt-2 text-xs text-gray-600 truncate",children:e.address}),(0,t.jsxs)("p",{className:"text-xs text-gray-600",children:[e.district,", ",e.city]})]}),(0,t.jsxs)("div",{className:"mt-1.5 sm:mt-2 flex justify-between items-center",children:[t.jsx("button",{onClick:e=>{e.stopPropagation(),o(!i)},className:"text-blue-700 text-xs hover:underline",children:i?"Sembunyikan":"Lihat Detail"}),(0,t.jsxs)("div",{className:"flex space-x-1",children:[s&&t.jsx("button",{onClick:a=>{a.stopPropagation(),s&&s(e)},className:`px-1.5 sm:px-2 py-0.5 sm:py-1 text-xs rounded ${n?"bg-gray-300 text-gray-700":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,disabled:n,children:n?"Ditambahkan":"Bandingkan"}),t.jsx("button",{onClick:s=>{s.stopPropagation(),a?a(e):d.push(`/properties/${e.id}`)},className:"px-1.5 sm:px-2 py-0.5 sm:py-1 text-xs bg-blue-700 text-white rounded hover:bg-blue-800",children:"Temukan"})]})]})]})]})}var _=s(65613),P=s(60350),L=s(31651),F=s(11440),S=s.n(F);function Dashboard(){let[e,a]=(0,r.useState)([]),[s,n]=(0,r.useState)([]),[i,o]=(0,r.useState)([]),[d,c]=(0,r.useState)(!0),[m,u]=(0,r.useState)(null),[x,g]=(0,r.useState)(!1),[p,h]=(0,r.useState)(void 0),[b,f]=(0,r.useState)(null),[j,y]=(0,r.useState)([]),k=(0,r.useRef)(null),[v,w]=(0,r.useState)([void 0,void 0]),[C,F]=(0,r.useState)(void 0),[$,R]=(0,r.useState)(void 0),[B,T]=(0,r.useState)(""),[E,z]=(0,r.useState)(!0),[A,M]=(0,r.useState)(1),[I,D]=(0,r.useState)([]);(0,r.useMemo)(()=>[{id:"lst",name:"Land Surface Temperature"},{id:"ndvi",name:"Vegetation Index"},{id:"uhi",name:"Urban Heat Island"},{id:"utfvi",name:"Urban Thermal Field"},{id:"landuse",name:"Land Use"},{id:"jaringan_jalan",name:"Road Network"},{id:"ndbi",name:"Normalized Difference Built-up Index"},{id:"kemiringan_lereng",name:"Slope"},{id:"rtrw",name:"Regional Spatial Planning"}],[]);let formatPrice=e=>null==e?"Harga tidak tersedia":e>=1e9?`${(e/1e9).toFixed(1)} M`:e>=1e6?`${(e/1e6).toFixed(0)} Jt`:e.toLocaleString("id-ID"),H=(0,r.useCallback)(e=>({very_low:"bg-red-800",low:"bg-red-600",medium:"bg-yellow-600",high:"bg-red-600",very_high:"bg-red-800",excellent:"bg-green-600",good:"bg-green-500",moderate:"bg-yellow-600",poor:"bg-red-600",very_poor:"bg-red-800"})[e]||"bg-gray-500",[]),K=(0,r.useCallback)(e=>({excellent:"Sangat Baik",good:"Baik",moderate:"Cukup",poor:"Buruk",very_poor:"Sangat Buruk",very_low:"Sangat Buruk",low:"Buruk",medium:"Cukup",high:"Baik",very_high:"Sangat Baik"})[e]||e.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase()),[]),Z=(0,r.useCallback)(()=>{g(!x)},[x]);(0,r.useEffect)(()=>{let fetchInitialData=async()=>{try{c(!0),console.log("Fetching initial data...");let e=await P.G8.getProperties(),s=e.data||[];console.log(`Fetched ${s.length} properties`),a(s),n(s),o(s)}catch(e){console.error("Error fetching initial data:",e),u("Failed to load initial data. Please refresh the page.")}finally{c(!1)}};fetchInitialData();let handleResize=()=>{window.innerWidth<768?g(!0):g(!1)};return handleResize(),window.addEventListener("resize",handleResize),()=>{window.removeEventListener("resize",handleResize)}},[]),(0,r.useEffect)(()=>{D(s.slice(0,10)),M(1),z(s.length>10)},[s]);let J=(0,r.useCallback)(()=>{let a=[...e];if(void 0!==v[0]&&(a=a.filter(e=>e.price>=(v[0]||0))),void 0!==v[1]&&(a=a.filter(e=>e.price<=(v[1]||1/0))),void 0!==C&&(a=4===C?a.filter(e=>e.bedrooms>3):a.filter(e=>e.bedrooms===C)),void 0!==$&&(a=a.filter(e=>e.climate_risk_score>=$)),""!==B.trim()){let e=B.toLowerCase().trim();a=a.filter(a=>a.title.toLowerCase().includes(e)||a.address?.toLowerCase().includes(e)||a.district?.toLowerCase().includes(e)||a.city?.toLowerCase().includes(e))}return n(a),a},[e,v,C,$,B]);(0,r.useEffect)(()=>{J()},[B,v,C,$,J]);let U=(0,r.useCallback)(()=>{c(!0),console.log("Search button clicked");let e=J();o(e),window.innerWidth<768&&g(!0),c(!1)},[J]),G=(0,r.useCallback)(()=>{console.log("Reset filters"),w([void 0,void 0]),F(void 0),R(void 0),T(""),n(e)},[e]),V=(0,r.useCallback)(()=>{if(s.length<=10*A){z(!1);return}setTimeout(()=>{let e=s.slice(0,(A+1)*10);D(e),M(A+1)},300)},[s,A]),W=(0,r.useCallback)(a=>{if(0===a){h(void 0);return}if(1===a){h("lst");return}if(2===a){h("ndvi");return}if(3===a){h("uhi");return}if(4===a){h("utfvi");return}if(5===a){h("landuse");return}if(6===a){h("ndbi");return}else if(7===a){h("jaringan_jalan");return}else if(8===a){h("kemiringan_lereng");return}else if(9===a){h("rtrw");return}console.log(`Marker clicked for property ID: ${a}`);let s=e.find(e=>e.id===a);s?(console.log(`Found property: ${s.title}`),f(s),k.current&&s.location?(console.log(`Flying to [${s.location.longitude}, ${s.location.latitude}]`),k.current.flyTo({center:[s.location.longitude,s.location.latitude],zoom:16,duration:1e3})):console.error("Map reference not available or property location missing")):console.error(`Property with ID ${a} not found!`)},[e,h]),q=(0,r.useCallback)(e=>{j.some(a=>a.id===e.id)?y(j.filter(a=>a.id!==e.id)):j.length<3&&y([...j,e])},[j]),O=(0,r.useCallback)(e=>{console.log(`View details for property: ${e.title}`),f(e),k.current&&e.location?(console.log(`Flying to [${e.location.longitude}, ${e.location.latitude}]`),k.current.flyTo({center:[e.location.longitude,e.location.latitude],zoom:16,duration:1500})):console.error("Map reference not available or property location missing"),window.innerWidth<768&&g(!0)},[]),X=(0,r.useCallback)((e,a)=>{w([e,a])},[]),Q=(0,r.useCallback)(e=>{F(e?Number(e):void 0)},[]),Y=(0,r.useCallback)(e=>{R(e?Number(e):void 0)},[]);return t.jsx("main",{className:"h-screen flex flex-col overflow-hidden",children:(0,t.jsxs)("div",{className:"flex-1 flex overflow-hidden relative",children:[t.jsx("button",{className:`md:hidden absolute top-4 z-50 bg-white p-2 rounded-full shadow-md text-gray-700 mt-12 transition-all duration-300 ${x?"left-4":"right-4"}`,onClick:Z,"aria-label":x?"Show property list":"Hide property list",children:x?t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}):t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,t.jsxs)("div",{className:`border-r bg-white flex pt-16 flex-col overflow-hidden transition-all duration-300 absolute md:relative z-40 md:z-auto h-full
          ${x?"w-0 -translate-x-full md:w-1/4 md:translate-x-0":"w-full md:w-1/4"}`,children:[(0,t.jsxs)("div",{className:"p-2 sm:p-3 border-b bg-white",children:[t.jsx("div",{className:"flex items-center justify-between mb-2",children:t.jsx("h3",{className:"font-bold text-base sm:text-lg text-gray-800",children:"Temukan Properti Ramah Iklim."})}),t.jsx("div",{className:"mb-2",children:t.jsx("input",{type:"text",placeholder:"Cari properti...",className:"w-full p-1.5 sm:p-2 border border-gray-300 rounded-md text-black text-sm",value:B,onChange:e=>T(e.target.value)})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-800 mb-0.5 sm:mb-1",children:"Rentang Harga"}),t.jsx("div",{className:"grid grid-cols-3 gap-1",children:[{label:"Semua",min:void 0,max:void 0},{label:"< 100JT",min:0,max:1e8},{label:"100JT - 1M",min:1e8,max:1e9},{label:"1M - 5M",min:1e9,max:5e9},{label:"5M - 10M",min:5e9,max:1e10},{label:"> 10M",min:1e10,max:void 0}].map((e,a)=>t.jsx("button",{className:`px-1.5 py-0.5 sm:px-2 sm:py-1 text-xs border rounded-md transition ${v[0]===e.min&&v[1]===e.max?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 hover:border-gray-400 text-black"}`,onClick:()=>X(e.min,e.max),children:e.label},a))})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-800 mb-0.5 sm:mb-1",children:"Kamar Tidur"}),(0,t.jsxs)("select",{className:"w-full p-1 sm:p-2 border border-gray-300 rounded-md cursor-pointer bg-white text-black text-xs sm:text-sm",value:C||"",onChange:e=>Q(e.target.value),children:[t.jsx("option",{value:"",children:"Semua"}),t.jsx("option",{value:"1",children:"1"}),t.jsx("option",{value:"2",children:"2"}),t.jsx("option",{value:"3",children:"3"}),t.jsx("option",{value:"4",children:">3"})]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-800 mb-0.5 sm:mb-1",children:"Skor Iklim Min."}),(0,t.jsxs)("select",{className:"w-full p-1 sm:p-2 border border-gray-300 cursor-pointer rounded-md bg-white text-black text-xs sm:text-sm",value:$||"",onChange:e=>Y(e.target.value),children:[t.jsx("option",{value:"",children:"Semua"}),t.jsx("option",{value:"50",children:"50+"}),t.jsx("option",{value:"60",children:"60+"}),t.jsx("option",{value:"70",children:"70+"}),t.jsx("option",{value:"80",children:"80+"})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2 pt-1 sm:pt-2",children:[t.jsx("button",{onClick:G,className:"px-2 py-1 text-xs sm:text-sm border border-gray-300 rounded-md hover:bg-gray-50 text-gray-800",children:"Reset"}),t.jsx("button",{onClick:U,className:"px-2 py-1 text-xs sm:text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Cari"})]})]})]}),t.jsx("div",{id:"propertyScrollContainer",className:"flex-1 overflow-y-auto",children:t.jsx("div",{className:"p-2 sm:p-3",children:d?t.jsx("div",{className:"text-center py-8",children:t.jsx("p",{className:"text-gray-800",children:"Loading properties..."})}):m?t.jsx("div",{className:"bg-red-50 p-3 rounded-md text-red-700",children:t.jsx("p",{children:m})}):0===s.length?t.jsx("div",{className:"text-center py-8 text-gray-800",children:t.jsx("p",{children:"Tidak ada properti yang ditemukan sesuai kriteria Anda."})}):t.jsx(l(),{dataLength:I.length,next:V,hasMore:E,loader:t.jsx("div",{className:"text-center py-3",children:t.jsx("p",{className:"text-gray-700 text-sm",children:"Loading more properties..."})}),scrollableTarget:"propertyScrollContainer",children:t.jsx("div",{className:"space-y-2 sm:space-y-3",children:I.map(e=>t.jsx(PropertyCard,{property:e,onViewDetails:O,onCompare:q,isComparing:j.some(a=>a.id===e.id),imageUrl:"/house-image.jpg"},e.id))})})})})]}),(0,t.jsxs)("div",{className:`relative overflow-hidden transition-all duration-300 
          ${x?"w-full":"w-0 md:w-3/4"}`,children:[t.jsx(N,{properties:i,activeLayer:p,onMarkerClick:W,mapRef:k}),b&&(0,t.jsxs)("div",{className:"absolute bottom-16 max-h-[80vh] overflow-y-auto left-4 right-4 max-w-md mx-auto bg-white rounded-md shadow-lg p-3 sm:p-4 z-20",children:[t.jsx("button",{onClick:()=>f(null),className:"absolute top-2 right-2 text-gray-600 hover:text-gray-800 text-xl","aria-label":"Close",children:"\xd7"}),t.jsx("h3",{className:"font-bold text-base sm:text-lg mb-1.5 sm:mb-2 text-gray-800 pr-6",children:b.title}),(0,t.jsxs)("p",{className:"text-blue-700 font-bold text-lg sm:text-xl mb-1.5 sm:mb-2",children:["Rp ",formatPrice(b.price)]}),(0,t.jsxs)("div",{className:"flex flex-wrap justify-between items-center mb-3 sm:mb-4",children:[(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 sm:gap-4 text-xs sm:text-sm text-gray-700",children:[(0,t.jsxs)("span",{children:[b.bedrooms??"-"," Kamar"]}),(0,t.jsxs)("span",{children:["Rp ",formatPrice(b.price_per_meter)??"-","/m\xb2"]}),(0,t.jsxs)("span",{children:[b.land_area??"-"," m\xb2 Lahan"]})]}),t.jsx("div",{className:"mt-1.5 sm:mt-0",children:t.jsx(_.Z,{score:b.climate_risk_score})})]}),b.climate_scores&&t.jsx("div",{className:"mb-3 sm:mb-4 mt-1.5 sm:mt-2",children:t.jsx(L.Z,{scores:b.climate_scores})}),t.jsx("h4",{className:"font-bold text-xs sm:text-sm mb-1.5 sm:mb-2 mt-3 sm:mt-4 text-gray-800",children:"Penilaian Risiko Iklim"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-2 sm:gap-x-4 gap-y-1.5 sm:gap-y-2 text-xs sm:text-sm mb-3 sm:mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("span",{className:`inline-block w-2 sm:w-3 h-2 sm:h-3 rounded-full ${H(b.risks?.surface_temperature||"medium")} mr-1.5 sm:mr-2`}),(0,t.jsxs)("span",{className:"text-gray-700",children:["Suhu Permukaan:"," ",K(b.risks?.surface_temperature||"medium")]})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("span",{className:`inline-block w-2 sm:w-3 h-2 sm:h-3 rounded-full ${H(b.risks?.heat_stress||"medium")} mr-1.5 sm:mr-2`}),(0,t.jsxs)("span",{className:"text-gray-700",children:["Tekanan Panas:"," ",K(b.risks?.heat_stress||"medium")]})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("span",{className:`inline-block w-2 sm:w-3 h-2 sm:h-3 rounded-full ${H(b.risks?.green_cover||"medium")} mr-1.5 sm:mr-2`}),(0,t.jsxs)("span",{className:"text-gray-700",children:["Tutupan Hijau:"," ",K(b.risks?.green_cover||"medium")]})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("span",{className:`inline-block w-2 sm:w-3 h-2 sm:h-3 rounded-full ${H(b.risks?.heat_zone||"medium")} mr-1.5 sm:mr-2`}),(0,t.jsxs)("span",{className:"text-gray-700",children:["Zona Panas:"," ",K(b.risks?.heat_zone||"medium")]})]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap justify-end gap-2 mt-3 sm:mt-4",children:[t.jsx("button",{onClick:()=>f(null),className:"px-3 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm bg-gray-200 text-gray-700 hover:bg-gray-300 rounded-md",children:"Tutup"}),t.jsx(S(),{href:`/properties/${b.id}`,className:"px-3 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Lihat Detail"})]})]}),j.length>0&&t.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t shadow-md p-2 sm:p-4 z-30",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-1.5 sm:mb-2",children:[(0,t.jsxs)("h3",{className:"font-bold text-xs sm:text-sm md:text-base",children:["Membandingkan ",j.length," properti"]}),t.jsx("button",{onClick:()=>y([]),className:"text-xs sm:text-sm text-red-600 hover:underline",children:"Hapus semua"})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[j.map(e=>(0,t.jsxs)("div",{className:"flex-1 bg-blue-50 p-1.5 sm:p-2 md:p-3 rounded-md",children:[t.jsx("p",{className:"font-bold truncate text-gray-800 text-xs sm:text-sm",children:e.title}),(0,t.jsxs)("div",{className:"flex justify-between mt-1.5 sm:mt-2",children:[t.jsx(_.Z,{score:e.climate_risk_score,size:"sm"}),(0,t.jsxs)("p",{className:"font-bold text-gray-800 text-xs sm:text-sm",children:["Rp ",formatPrice(e.price)]})]})]},e.id)),t.jsx(S(),{href:`/comparison?ids=${j.map(e=>e.id).join(",")}`,className:"px-3 sm:px-4 py-1.5 sm:py-2 bg-blue-600 text-white text-xs sm:text-sm rounded-md hover:bg-blue-700 flex items-center justify-center",children:"Bandingkan"})]})]})})]})]})})}},52070:(e,a,s)=>{"use strict";s.r(a),s.d(a,{$$typeof:()=>l,__esModule:()=>n,default:()=>o});var t=s(17536);let r=(0,t.createProxy)(String.raw`E:\Coding\WGC2025\smart-property\frontend\src\app\maps\page.tsx`),{__esModule:n,$$typeof:l}=r,i=r.default,o=i}};var a=require("../../webpack-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),s=a.X(0,[973,356,566,358,468,350,613,341],()=>__webpack_exec__(67411));module.exports=s})();